(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7290b604"],{"1ceb":function(e,t,l){"use strict";var a=l("671e"),i=l.n(a);i.a},"2e21":function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"stock"},[l("el-row",[l("el-col",{attrs:{span:4}},[l("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("新增压型记录")])],1),l("el-col",{attrs:{span:6}},[l("el-input",{attrs:{placeholder:"请输入要搜索的编号"},model:{value:e.searchSerial,callback:function(t){e.searchSerial=t},expression:"searchSerial"}},[l("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)],1),l("el-table",{attrs:{data:e.filteredData}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:"","label-width":"110px"}},[l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"编号"}},[e._v(" "+e._s(t.row.serial)+" ")])],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"压机编号"}},[e._v(" "+e._s(t.row.machineSerial)+" ")])],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"毛坯数量"}},[e._v(" "+e._s(t.row.billetAmount)+" 块 ")])],1)],1),l("el-form-item",{attrs:{label:"日期"}},[e._v(" "+e._s(t.row.createTime)+" ")]),l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"领料"}},[e._v(" "+e._s(t.row.pickingWeight)+" ")])],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"产品单重"}},[e._v(" "+e._s(t.row.singleProduct)+" ")])],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"模具编号及尺寸"}},[e._v(" "+e._s(t.row.toolsInfo)+" ")])],1)],1),e._l(t.row.billetSizes.rows[0],(function(t){return l("el-row",{key:t.col0},[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:t.col0+t.col1}},[e._v(" "+e._s(t.col2)+" ")])],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:t.col0+t.col3}},[e._v(" "+e._s(t.col4)+" ")])],1)],1)})),l("span",[l("h3",[e._v("设计压坯尺寸（mm）")])]),l("el-table",{attrs:{data:t.row.billetSizes.rows[1],border:""}},[l("el-table-column",{attrs:{prop:"col1",label:"压制"}}),l("el-table-column",{attrs:{prop:"col2",label:"模宽"}}),l("el-table-column",{attrs:{prop:"col3",label:"取向"}})],1),l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"氮气量（开始）"}},[e._v(" "+e._s(t.row.starNitrogen)+" ")])],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"氮气量（结束）"}},[e._v(" "+e._s(t.row.endNitrogen)+" ")])],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"操作人"}},[e._v(" "+e._s(t.row.operator)+" ")])],1)],1),l("el-form-item",{attrs:{label:"备注"}},[e._v(" "+e._s(t.row.note)+" ")])],2)]}}])}),l("el-table-column",{attrs:{label:"编号",prop:"serial"}}),l("el-table-column",{attrs:{label:"压机编号",prop:"machineSerial"}}),l("el-table-column",{attrs:{label:"日期",prop:"createTime"}}),l("el-table-column",{attrs:{label:"毛坯数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.billetAmount)+" 块 ")]}}])}),l("el-table-column",{attrs:{label:"模具编号及尺寸",prop:"toolsInfo"}}),l("el-table-column",{attrs:{label:"备注",prop:"note"}}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini"},on:{click:function(l){return e.handleEdit(t.row,t.$index)}}},[e._v("编辑")]),l("el-popover",{ref:"popover"+t.$index},[l("p",[e._v("确定删除 "+e._s(t.row.serial)+" 吗？")]),l("div",{staticStyle:{"text-align":"right",margin:"0"}},[l("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(l){return e.closeDeletePopover(t.$index)}}},[e._v("取消")]),l("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(l){return e.handleDelete(t.row,t.$index)}}},[e._v("确定")])],1),l("el-button",{staticStyle:{"margin-left":"1rem"},attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),l("el-dialog",{attrs:{title:e.editDialogTitle,width:"50%","before-close":e.handleEditDialogClose,visible:e.editDialogVisible,center:""}},[l("el-form",{attrs:{"label-width":"110px"}},[l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"编号"}},[l("el-input",{attrs:{disabled:e.disableEditSerial},model:{value:e.editDialogData.serial,callback:function(t){e.$set(e.editDialogData,"serial",t)},expression:"editDialogData.serial"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"压机编号"}},[l("el-input",{model:{value:e.editDialogData.machineSerial,callback:function(t){e.$set(e.editDialogData,"machineSerial",t)},expression:"editDialogData.machineSerial"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"毛坯数量"}},[l("el-input",{model:{value:e.editDialogData.billetAmount,callback:function(t){e.$set(e.editDialogData,"billetAmount",t)},expression:"editDialogData.billetAmount"}},[l("template",{slot:"append"},[e._v("块")])],2)],1)],1)],1),l("el-form-item",{attrs:{label:"日期"}},[l("el-date-picker",{model:{value:e.editDialogData.createTime,callback:function(t){e.$set(e.editDialogData,"createTime",t)},expression:"editDialogData.createTime"}})],1),l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"领料"}},[l("el-input",{model:{value:e.editDialogData.pickingWeight,callback:function(t){e.$set(e.editDialogData,"pickingWeight",t)},expression:"editDialogData.pickingWeight"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"产品单重"}},[l("el-input",{model:{value:e.editDialogData.singleProduct,callback:function(t){e.$set(e.editDialogData,"singleProduct",t)},expression:"editDialogData.singleProduct"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"模具编号及尺寸"}},[l("el-input",{model:{value:e.editDialogData.toolsInfo,callback:function(t){e.$set(e.editDialogData,"toolsInfo",t)},expression:"editDialogData.toolsInfo"}})],1)],1)],1),e._l(e.editDialogData.billetSizes.rows[0],(function(t){return l("el-row",{key:t.col0},[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:t.col0+t.col1}},[l("el-input",{model:{value:t.col2,callback:function(l){e.$set(t,"col2",l)},expression:"row.col2"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:t.col0+t.col3}},[l("el-input",{model:{value:t.col4,callback:function(l){e.$set(t,"col4",l)},expression:"row.col4"}})],1)],1)],1)})),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editDialogData.billetSizes.rows[1].push({})}}},[e._v("增加原料")]),e.editDialogData.billetSizes.rows[1].length>0?l("div",{staticStyle:{padding:"1rem"}},[l("h3",[e._v("设计压坯尺寸（mm）")])]):e._e(),e._l(e.editDialogData.billetSizes.rows[1],(function(t,a){return l("el-row",{key:t.col0},[l("el-col",{attrs:{span:7}},[l("el-form-item",{attrs:{label:"压制"}},[l("el-input",{model:{value:t.col1,callback:function(l){e.$set(t,"col1",l)},expression:"row.col1"}})],1)],1),l("el-col",{attrs:{span:7}},[l("el-form-item",{attrs:{label:"模宽"}},[l("el-input",{model:{value:t.col2,callback:function(l){e.$set(t,"col2",l)},expression:"row.col2"}})],1)],1),l("el-col",{attrs:{span:7}},[l("el-form-item",{attrs:{label:"取向"}},[l("el-input",{model:{value:t.col3,callback:function(l){e.$set(t,"col3",l)},expression:"row.col3"}})],1)],1),l("el-col",{attrs:{span:3}},[l("el-button",{staticStyle:{float:"right"},attrs:{size:"medium",type:"danger"},on:{click:function(t){return e.editDialogData.billetSizes.rows[1].splice(a,1)}}},[e._v("删除")])],1)],1)})),l("el-row",[l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"氮气量（开始）"}},[l("el-input",{model:{value:e.editDialogData.starNitrogen,callback:function(t){e.$set(e.editDialogData,"starNitrogen",t)},expression:"editDialogData.starNitrogen"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"氮气量（结束）"}},[l("el-input",{model:{value:e.editDialogData.endNitrogen,callback:function(t){e.$set(e.editDialogData,"endNitrogen",t)},expression:"editDialogData.endNitrogen"}})],1)],1),l("el-col",{attrs:{span:8}},[l("el-form-item",{attrs:{label:"操作人"}},[l("el-input",{model:{value:e.editDialogData.operator,callback:function(t){e.$set(e.editDialogData,"operator",t)},expression:"editDialogData.operator"}})],1)],1)],1),l("el-form-item",{attrs:{label:"备注"}},[l("el-input",{model:{value:e.editDialogData.note,callback:function(t){e.$set(e.editDialogData,"note",t)},expression:"editDialogData.note"}})],1)],2),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.submitDialogData}},[e._v("确定")])],1)],1)],1)},i=[],o=(l("4de4"),l("4160"),l("c975"),l("fb6a"),l("159b"),l("96cf"),l("1da1")),r=l("4f96"),n=l("5530"),s=l("2f62"),c=l("c1df"),u=l.n(c),d={data:function(){return{searchSerial:"",loading:!0,editDialogVisible:!1,disableEditSerial:!0,editDialogTitle:"",editDialogData:{billetSizes:{rows:[[{col0:"压制",col1:"压力",col3:"时间"},{col0:"充磁",col1:"电流",col3:"时间"},{col0:"退磁",col1:"电流",col3:"时间"},{col0:"氧含量",col1:"称料室",col3:"包装室"}],[]]}}}},created:function(){this.fetch()},computed:Object(n["a"])({filteredData:function(){var e=this,t=Object(r["a"])(this.pressureRecordData),l=t.slice(0);return this.searchSerial&&(l=l.filter((function(t){return-1!==t.serial.indexOf(e.searchSerial)}))),l.forEach((function(e){e.billetSizes=JSON.parse(e.billetSizes)})),l}},Object(s["b"])(["pressureRecordData"])),methods:{handleEditDialogClose:function(e){var t=this;this.$confirm("确认关闭？").then((function(){e(),t.editDialogVisible=!1})).catch((function(){}))},closeDeletePopover:function(e){this.$refs["popover"+e].doClose()},fetch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("fetchPressureRecordData");case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){this.editDialogVisible=!0,this.editDialogTitle="编辑 "+e.serial,this.disableEditSerial=!0,this.editDialogData=JSON.parse(JSON.stringify(e)),this.editDialogData.createTime=u()(this.editDialogData.createTime,"YYYY-M-D").toDate(),console.log(this.editDialogData)},handleCreate:function(){this.editDialogVisible=!0,this.editDialogTitle="新增压型记录",this.disableEditSerial=!1,this.editDialogData={createTime:new Date,billetSizes:{rows:[[{col0:"压制",col1:"压力",col3:"时间"},{col0:"充磁",col1:"电流",col3:"时间"},{col0:"退磁",col1:"电流",col3:"时间"},{col0:"氧含量",col1:"称料室",col3:"包装室"}],[]]}}},submitDialogData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.editDialogVisible=!1,l=JSON.parse(JSON.stringify(e.editDialogData)),l.createTime=u()(e.editDialogData.createTime).format("YYYY-M-D"),l.billetSizes=JSON.stringify(e.editDialogData.billetSizes),t.next=7,e.$store.dispatch({type:"updatePressureRecordData",data:l});case 7:e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},handleDelete:function(e,t){var l=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return l.closeDeletePopover(t),l.loading=!0,a.next=4,l.$store.dispatch({type:"deletePressureRecordDataById",data:e.id});case 4:l.loading=!1;case 5:case"end":return a.stop()}}),a)})))()}}},p=d,f=(l("1ceb"),l("2877")),b=Object(f["a"])(p,a,i,!1,null,null,null);t["default"]=b.exports},5530:function(e,t,l){"use strict";l.d(t,"a",(function(){return o}));l("a4d3"),l("4de4"),l("4160"),l("e439"),l("dbb4"),l("b64b"),l("159b");function a(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function i(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),l.push.apply(l,a)}return l}function o(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?i(Object(l),!0).forEach((function(t){a(e,t,l[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):i(Object(l)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))}))}return e}},"671e":function(e,t,l){},b64b:function(e,t,l){var a=l("23e7"),i=l("7b0b"),o=l("df75"),r=l("d039"),n=r((function(){o(1)}));a({target:"Object",stat:!0,forced:n},{keys:function(e){return o(i(e))}})},c975:function(e,t,l){"use strict";var a=l("23e7"),i=l("4d64").indexOf,o=l("a640"),r=l("ae40"),n=[].indexOf,s=!!n&&1/[1].indexOf(1,-0)<0,c=o("indexOf"),u=r("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:s||!c||!u},{indexOf:function(e){return s?n.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,l){var a=l("23e7"),i=l("83ab"),o=l("56ef"),r=l("fc6a"),n=l("06cf"),s=l("8418");a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,l,a=r(e),i=n.f,c=o(a),u={},d=0;while(c.length>d)l=i(a,t=c[d++]),void 0!==l&&s(u,t,l);return u}})},e439:function(e,t,l){var a=l("23e7"),i=l("d039"),o=l("fc6a"),r=l("06cf").f,n=l("83ab"),s=i((function(){r(1)})),c=!n||s;a({target:"Object",stat:!0,forced:c,sham:!n},{getOwnPropertyDescriptor:function(e,t){return r(o(e),t)}})}}]);
//# sourceMappingURL=chunk-7290b604.a236cc85.js.map