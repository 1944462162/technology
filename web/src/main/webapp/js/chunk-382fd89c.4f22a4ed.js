(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-382fd89c"],{"140b":function(e,t,a){},"1d1f":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"stock"},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("新增磨粉记录")])],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入要搜索的编号"},model:{value:e.searchSerial,callback:function(t){e.searchSerial=t},expression:"searchSerial"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)],1),a("el-table",{attrs:{data:e.filteredData}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制粉起始时间","label-width":"110px"}},[e._v(" "+e._s(e._f("dateToTime")(new Date(Number(t.row.flourDetails.row1.col1))))+" ")])],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"制粉终止时间","label-width":"110px"}},[e._v(" "+e._s(e._f("dateToTime")(new Date(Number(t.row.flourDetails.row1.col2))))+" ")])],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"制粉耗时（h）","label-width":"110px"}},[e._v(" "+e._s(t.row.flourDetails.row1.col3)+" ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制粉起始氧含量","label-width":"110px"}},[e._v(" "+e._s(t.row.flourDetails.row2.col1)+" ppm ")])],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"制粉过程氧含量","label-width":"110px"}},[e._v(" "+e._s(t.row.flourDetails.row2.col2)+" ppm ")])],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"制粉结束氧含量","label-width":"110px"}},[e._v(" "+e._s(t.row.flourDetails.row2.col3)+" ppm ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"分选机转速","label-width":"110px"}},[e._v(" "+e._s(t.row.flourDetails.row3.col1)+" rpm ")])],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"研磨压力","label-width":"110px"}},[e._v(" "+e._s(t.row.flourDetails.row3.col2)+" Mpa ")])],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制粉机起始流量","label-width":"110px"}},[e._v(" "+e._s(t.row.flourDetails.row4.col1)+" Nm³ ")])],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"制粉机终止流量","label-width":"110px"}},[e._v(" "+e._s(t.row.flourDetails.row4.col2)+" Nm³ ")])],1)],1)],1)]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"日期"}}),a("el-table-column",{attrs:{prop:"serial",label:"编号"}}),a("el-table-column",{attrs:{prop:"operator",label:"制作人"}}),a("el-table-column",{attrs:{label:"料重"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.feedWeight)+" Kg ")]}}])}),a("el-table-column",{attrs:{label:"吐料"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.spittingWeight)+" Kg ")]}}])}),a("el-table-column",{attrs:{label:"收率"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.yield)+" % ")]}}])}),a("el-table-column",{attrs:{prop:"feedNote",label:"说明"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-popover",{ref:"popover"+t.$index},[a("p",[e._v("确定删除 "+e._s(t.row.serial)+" 吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.closeDeletePopover(t.$index)}}},[e._v("取消")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelete(t.row,t.$index)}}},[e._v("确定")])],1),a("el-button",{staticStyle:{"margin-left":"1rem"},attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),a("el-dialog",{attrs:{title:e.editDialogTitle,width:"60%","before-close":e.handleEditDialogClose,visible:e.editDialogVisible,center:""}},[a("el-form",[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"编号","label-width":"100px"}},[a("el-input",{attrs:{disabled:e.disableEditSerial},model:{value:e.editDialogData.serial,callback:function(t){e.$set(e.editDialogData,"serial",t)},expression:"editDialogData.serial"}})],1)],1),a("el-col",{attrs:{span:6,offset:1}},[a("el-form-item",{attrs:{label:"操作人","label-width":"60px"}},[a("el-input",{model:{value:e.editDialogData.operator,callback:function(t){e.$set(e.editDialogData,"operator",t)},expression:"editDialogData.operator"}})],1)],1),a("el-col",{attrs:{span:8,offset:1}},[a("el-form-item",{attrs:{label:"日期","label-width":"50px"}},[a("el-date-picker",{model:{value:e.editDialogData.createTime,callback:function(t){e.$set(e.editDialogData,"createTime",t)},expression:"editDialogData.createTime"}})],1)],1)],1),a("el-form-item",{attrs:{label:"设备运行状态","label-width":"110px"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editDialogData.machineStatus,callback:function(t){e.$set(e.editDialogData,"machineStatus",t)},expression:"editDialogData.machineStatus"}})],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"110px",label:"料重"}},[a("el-input",{model:{value:e.editDialogData.feedWeight,callback:function(t){e.$set(e.editDialogData,"feedWeight",t)},expression:"editDialogData.feedWeight"}},[a("template",{slot:"append"},[e._v("Kg")])],2)],1)],1),a("el-col",{attrs:{span:15,offset:1}},[a("el-form-item",{attrs:{"label-width":"110px",label:"投料说明"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editDialogData.feedNote,callback:function(t){e.$set(e.editDialogData,"feedNote",t)},expression:"editDialogData.feedNote"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"制粉时间","label-width":"110px"}},[a("el-time-picker",{attrs:{"is-range":"","start-placeholder":"制粉起始时间","end-placeholder":"制粉结束时间"},model:{value:e.editDialogData.flourDetails.row1.timeRange,callback:function(t){e.$set(e.editDialogData.flourDetails.row1,"timeRange",t)},expression:"editDialogData.flourDetails.row1.timeRange"}})],1)],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"制粉耗时（h）","label-width":"150px"}},[a("el-input",{attrs:{disabled:"",value:e.hoursBetweenDates}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制粉起始氧含量","label-width":"110px"}},[a("el-input",{model:{value:e.editDialogData.flourDetails.row2.col1,callback:function(t){e.$set(e.editDialogData.flourDetails.row2,"col1",t)},expression:"editDialogData.flourDetails.row2.col1"}},[a("template",{slot:"append"},[e._v("ppm")])],2)],1)],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"制粉过程氧含量","label-width":"110px"}},[a("el-input",{model:{value:e.editDialogData.flourDetails.row2.col2,callback:function(t){e.$set(e.editDialogData.flourDetails.row2,"col2",t)},expression:"editDialogData.flourDetails.row2.col2"}},[a("template",{slot:"append"},[e._v("ppm")])],2)],1)],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"制粉结束氧含量","label-width":"110px"}},[a("el-input",{model:{value:e.editDialogData.flourDetails.row2.col3,callback:function(t){e.$set(e.editDialogData.flourDetails.row2,"col3",t)},expression:"editDialogData.flourDetails.row2.col3"}},[a("template",{slot:"append"},[e._v("ppm")])],2)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"分选机转速","label-width":"110px"}},[a("el-input",{model:{value:e.editDialogData.flourDetails.row3.col1,callback:function(t){e.$set(e.editDialogData.flourDetails.row3,"col1",t)},expression:"editDialogData.flourDetails.row3.col1"}},[a("template",{slot:"append"},[e._v("rpm")])],2)],1)],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"研磨压力","label-width":"110px"}},[a("el-input",{model:{value:e.editDialogData.flourDetails.row3.col2,callback:function(t){e.$set(e.editDialogData.flourDetails.row3,"col2",t)},expression:"editDialogData.flourDetails.row3.col2"}},[a("template",{slot:"append"},[e._v("Mpa")])],2)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"制粉机起始流量","label-width":"110px"}},[a("el-input",{model:{value:e.editDialogData.flourDetails.row4.col1,callback:function(t){e.$set(e.editDialogData.flourDetails.row4,"col1",t)},expression:"editDialogData.flourDetails.row4.col1"}},[a("template",{slot:"append"},[e._v("Nm³")])],2)],1)],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"制粉机起始流量","label-width":"110px"}},[a("el-input",{model:{value:e.editDialogData.flourDetails.row4.col2,callback:function(t){e.$set(e.editDialogData.flourDetails.row4,"col2",t)},expression:"editDialogData.flourDetails.row4.col2"}},[a("template",{slot:"append"},[e._v("Nm³")])],2)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"料重","label-width":"110px"}},[a("el-input",{model:{value:e.editDialogData.materialWeight,callback:function(t){e.$set(e.editDialogData,"materialWeight",t)},expression:"editDialogData.materialWeight"}},[a("template",{slot:"append"},[e._v("Kg")])],2)],1)],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"吐料","label-width":"110px"}},[a("el-input",{model:{value:e.editDialogData.spittingWeight,callback:function(t){e.$set(e.editDialogData,"spittingWeight",t)},expression:"editDialogData.spittingWeight"}},[a("template",{slot:"append"},[e._v("Kg")])],2)],1)],1),a("el-col",{attrs:{span:7,offset:1}},[a("el-form-item",{attrs:{label:"收率","label-width":"110px"}},[a("el-input",{attrs:{disabled:""},model:{value:e.getYeild,callback:function(t){e.getYeild=t},expression:"getYeild"}},[a("template",{slot:"append"},[e._v("%")])],2)],1)],1)],1),a("el-form-item",{attrs:{label:"备注","label-width":"110px"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editDialogData.note,callback:function(t){e.$set(e.editDialogData,"note",t)},expression:"editDialogData.note"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitDialogData}},[e._v("确定")])],1)],1)],1)},i=[],o=(a("a4d3"),a("4de4"),a("c975"),a("fb6a"),a("a9e3"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("96cf"),a("1da1")),r=a("4f96"),s=a("ade3"),n=a("2f62"),c=a("c1df"),d=a.n(c);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D={data:function(){return{searchSerial:"",loading:!0,editDialogVisible:!1,disableEditSerial:!0,editDialogTitle:"",editDialogData:{createTime:new Date,flourDetails:{row1:{timeRange:[new Date,new Date]},row2:{col1:"",col2:"",col3:""},row3:{col1:"",col2:""},row4:{col1:"",col2:""}}}}},computed:u({filteredData:function(){var e=this,t=Object(r["a"])(this.flourMillingData),a=t.slice(0);return this.searchSerial&&(a=a.filter((function(t){return-1!==t.serial.indexOf(e.searchSerial)}))),a},hoursBetweenDates:function(){if(this.editDialogData.flourDetails.row1.timeRange){var e=d()(this.editDialogData.flourDetails.row1.timeRange[0]),t=d()(this.editDialogData.flourDetails.row1.timeRange[1]);return"".concat(t.diff(e)/36e5," h")}return""},getYeild:function(){return this.editDialogData.materialWeight/this.editDialogData.feedWeight*100}},Object(n["b"])(["flourMillingData"])),created:function(){this.fetch()},methods:{handleEditDialogClose:function(e){var t=this;this.$confirm("确认关闭？").then((function(){e(),t.editDialogVisible=!1})).catch((function(){}))},closeDeletePopover:function(e){this.$refs["popover"+e].doClose()},fetch:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$store.dispatch("fetchFlourMillingData");case 3:this.loading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleEdit:function(e){this.editDialogVisible=!0,this.editDialogTitle="编辑 "+e.serial,this.disableEditSerial=!0,this.editDialogData=JSON.parse(JSON.stringify(e)),this.editDialogData.createTime=new Date(this.editDialogData.createTime),this.editDialogData.createTime=d()(this.editDialogData.createTime,"YYYY-M-D").toDate(),this.editDialogData.feedWeight=Number(this.editDialogData.feedWeight),this.editDialogData.materialWeight=Number(this.editDialogData.materialWeight),console.log(this.editDialogData.flourDetails),this.$set(this.editDialogData.flourDetails.row1,"timeRange",[new Date(Number(this.editDialogData.flourDetails.row1.col1)),new Date(Number(this.editDialogData.flourDetails.row1.col2))]),console.log(this.editDialogData)},handleCreate:function(){this.editDialogVisible=!0,this.editDialogTitle="新增磨粉记录",this.disableEditSerial=!1,this.editDialogData={createTime:new Date,flourDetails:{row1:{timeRange:[new Date,new Date]},row2:{col1:"",col2:"",col3:""},row3:{col1:"",col2:""},row4:{col1:"",col2:""}}}},submitDialogData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.editDialogVisible=!1,this.editDialogData.createTime=d()(this.editDialogData.createTime).format("YYYY-M-D"),t=JSON.parse(JSON.stringify(this.editDialogData)),t.flourDetails.row1.col1=this.editDialogData.flourDetails.row1.timeRange[0].getTime(),t.flourDetails.row1.col2=this.editDialogData.flourDetails.row1.timeRange[1].getTime(),t.flourDetails.row1.col3=this.hoursBetweenDates,delete t.flourDetails.row1.timeRange,t.materialWeight=t.feedWeight,t.yield=this.getYeild,t.createTime=d()(new Date(t.createTime)).format("YYYY-M-D"),t.flourDetails=JSON.stringify(t.flourDetails),e.next=14,this.$store.dispatch({type:"updateFlourMillingData",data:t});case 14:this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.closeDeletePopover(a),this.loading=!0,e.next=4,this.$store.dispatch({type:"deleteFlourMillingDataById",data:t.id});case 4:this.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()}},p=D,m=(a("fc33"),a("2877")),g=Object(m["a"])(p,l,i,!1,null,null,null);t["default"]=g.exports},ade3:function(e,t,a){"use strict";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return l}))},b64b:function(e,t,a){var l=a("23e7"),i=a("7b0b"),o=a("df75"),r=a("d039"),s=r((function(){o(1)}));l({target:"Object",stat:!0,forced:s},{keys:function(e){return o(i(e))}})},c975:function(e,t,a){"use strict";var l=a("23e7"),i=a("4d64").indexOf,o=a("b301"),r=[].indexOf,s=!!r&&1/[1].indexOf(1,-0)<0,n=o("indexOf");l({target:"Array",proto:!0,forced:s||n},{indexOf:function(e){return s?r.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,a){var l=a("23e7"),i=a("83ab"),o=a("56ef"),r=a("fc6a"),s=a("06cf"),n=a("8418");l({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,a,l=r(e),i=s.f,c=o(l),d={},f=0;while(c.length>f)a=i(l,t=c[f++]),void 0!==a&&n(d,t,a);return d}})},e439:function(e,t,a){var l=a("23e7"),i=a("d039"),o=a("fc6a"),r=a("06cf").f,s=a("83ab"),n=i((function(){r(1)})),c=!s||n;l({target:"Object",stat:!0,forced:c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return r(o(e),t)}})},fc33:function(e,t,a){"use strict";var l=a("140b"),i=a.n(l);i.a}}]);
//# sourceMappingURL=chunk-382fd89c.4f22a4ed.js.map