(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ca8a595"],{1038:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"stock"},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("新增入库记录")])],1),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入要搜索的原料名称"},model:{value:e.searchStockName,callback:function(t){e.searchStockName=t},expression:"searchStockName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("el-col",{attrs:{span:12,offset:2}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchDateRange,callback:function(t){e.searchDateRange=t},expression:"searchDateRange"}})],1)],1),a("el-table",{attrs:{data:e.filteredData}},[a("el-table-column",{attrs:{prop:"id",label:"记录编号"}}),a("el-table-column",{attrs:{prop:"stock.stockName",label:"原料名称"}}),a("el-table-column",{attrs:{prop:"stock.unit",label:"单位"}}),a("el-table-column",{attrs:{prop:"numbers",label:"数量"}}),a("el-table-column",{attrs:{prop:"createDate",label:"创建日期"}}),a("el-table-column",{attrs:{prop:"note",label:"备注"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-popover",{ref:"popover"+t.$index},[a("p",[e._v("确定删除 "+e._s(t.row.stockName)+" 吗？")]),a("div",{staticStyle:{"text-align":"right",margin:"0"}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.closeDeletePopover(t.$index)}}},[e._v("取消")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelete(t.row,t.$index)}}},[e._v("确定")])],1),a("el-button",{staticStyle:{"margin-left":"1rem"},attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),a("el-dialog",{attrs:{title:e.editDialogTitle,width:"30%","before-close":e.handleEditDialogClose,visible:e.editDialogVisible,center:""}},[a("el-form",{attrs:{model:e.editDialogData}},[a("el-form-item",{attrs:{label:"原料",required:""}},[a("el-select",{attrs:{"value-key":"stockName"},model:{value:e.editDialogData.stock,callback:function(t){e.$set(e.editDialogData,"stock",t)},expression:"editDialogData.stock"}},e._l(e.stockOptions,(function(e){return a("el-option",{key:e.stockName,attrs:{label:e.stockName,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"单位"}},[a("el-input",{attrs:{value:e.editDialogData.stock.unit,disabled:""}})],1),a("el-form-item",{attrs:{label:"数量"}},[a("el-input",{attrs:{type:"number"},model:{value:e.editDialogData.numbers,callback:function(t){e.$set(e.editDialogData,"numbers",t)},expression:"editDialogData.numbers"}})],1),a("el-form-item",{attrs:{label:"创建日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.editDialogData.createDate,callback:function(t){e.$set(e.editDialogData,"createDate",t)},expression:"editDialogData.createDate"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editDialogData.note,callback:function(t){e.$set(e.editDialogData,"note",t)},expression:"editDialogData.note"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitDialogData}},[e._v("确定")])],1)],1)],1)},i=[],n=(a("4de4"),a("4160"),a("c975"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),o=a("5530"),l=a("2f62"),c=a("c1df"),s=a.n(c),u={data:function(){return{searchStockName:"",loading:!0,editDialogVisible:!1,editDialogTitle:"",editDialogData:{name:"",numbers:0,note:"",createDate:new Date,stock:{}},searchDateRange:[]}},computed:Object(o["a"])({filteredData:function(){var e=this,t=this.storageData;if(this.searchStockName&&(t=this.storageData.filter((function(t){return-1!==t.name.indexOf(e.searchStockName)}))),this.searchDateRange instanceof Array&&2===this.searchDateRange.length){var a=s()(this.searchDateRange[0]),r=s()(this.searchDateRange[1]);t=t.filter((function(e){var t=s()(e.createDate,"YYYY-M-D");return!(!t.isAfter(a)||!t.isBefore(r))}))}return t.forEach((function(t){e.stockOptions.forEach((function(e){t.name===e.stockName&&(t.stock=e)}))})),t}},Object(l["b"])(["storageData","stockOptions"])),created:function(){this.fetch()},methods:{handleEditDialogClose:function(e){var t=this;this.$confirm("确认关闭？").then((function(){e(),t.editDialogVisible=!1})).catch((function(){}))},closeDeletePopover:function(e){this.$refs["popover"+e].doClose()},fetch:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("fetchStorageData");case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){this.editDialogVisible=!0,this.editDialogTitle="编辑记录",this.editDialogData=JSON.parse(JSON.stringify(e)),this.editDialogData.createDate=s()(e.createDate,"YYYY-M-D").toDate()},handleCreate:function(){this.editDialogVisible=!0,this.editDialogTitle="新增记录",this.editDialogData={stock:{stockName:"",unit:""},createDate:new Date,note:""}},submitDialogData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.editDialogVisible=!1,e.editDialogData.name=e.editDialogData.stock.stockName,e.editDialogData.createDate=s()(e.editDialogData.createDate).format("YYYY-M-D"),t.next=6,e.$store.dispatch({type:"updateStorageData",data:e.editDialogData});case 6:e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},handleDelete:function(e,t){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.closeDeletePopover(t),a.loading=!0,r.next=4,a.$store.dispatch({type:"deleteStorageDataById",data:e.id});case 4:a.loading=!1;case 5:case"end":return r.stop()}}),r)})))()}}},d=u,f=a("2877"),p=Object(f["a"])(d,r,i,!1,null,null,null);t["default"]=p.exports},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},b64b:function(e,t,a){var r=a("23e7"),i=a("7b0b"),n=a("df75"),o=a("d039"),l=o((function(){n(1)}));r({target:"Object",stat:!0,forced:l},{keys:function(e){return n(i(e))}})},c975:function(e,t,a){"use strict";var r=a("23e7"),i=a("4d64").indexOf,n=a("a640"),o=a("ae40"),l=[].indexOf,c=!!l&&1/[1].indexOf(1,-0)<0,s=n("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!s||!u},{indexOf:function(e){return c?l.apply(this,arguments)||0:i(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,a){var r=a("23e7"),i=a("83ab"),n=a("56ef"),o=a("fc6a"),l=a("06cf"),c=a("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,a,r=o(e),i=l.f,s=n(r),u={},d=0;while(s.length>d)a=i(r,t=s[d++]),void 0!==a&&c(u,t,a);return u}})},e439:function(e,t,a){var r=a("23e7"),i=a("d039"),n=a("fc6a"),o=a("06cf").f,l=a("83ab"),c=i((function(){o(1)})),s=!l||c;r({target:"Object",stat:!0,forced:s,sham:!l},{getOwnPropertyDescriptor:function(e,t){return o(n(e),t)}})}}]);
//# sourceMappingURL=chunk-4ca8a595.0bfc6be0.js.map